{{define "brands"}}
{{template "layout" .}}
{{end}}

{{define "content"}}
<section class="surface stack">
  <div class="section-header">
    <div>
      <h2>Marques</h2>
      <p class="section-subtitle">Centralisez vos fournisseurs pour les réutiliser en un clic.</p>
    </div>
    <p class="metric-pill">{{len .Data.Brands}} marques enregistrées</p>
  </div>
  <div class="brand-gallery">
    {{if .Data.Brands}}
    {{range .Data.Brands}}
    {{- $brand := . -}}
    {{- $image := brandImageURL $brand.ImageBase64 -}}
    <article class="brand-card">
      <div>
        <h3>{{$brand.Name}}</h3>
        <p class="meta">Créée le {{formatDate $brand.CreatedAt}}</p>
      </div>
      {{if $image}}
      <img src="{{$image}}" alt="Illustration de la marque {{$brand.Name}}">
      {{end}}
      {{if $brand.Description}}
      <p>{{$brand.Description}}</p>
      {{end}}
    </article>
    {{end}}
    {{else}}
    <p>Aucune marque définie pour le moment.</p>
    {{end}}
  </div>
</section>

<section class="surface stack">
  <div class="section-header">
    <div>
      <h3>Ajouter une marque</h3>
      <p class="section-subtitle">Enrichissez vos fiches avec une description et une image.</p>
    </div>
  </div>
  <form method="post" enctype="multipart/form-data" class="stack">
    <div class="form-grid">
      <label>
        Nom
        <input type="text" name="name" placeholder="Ex. Woodstock" required>
      </label>
      <label>
        Description
        <textarea name="description" placeholder="Notes, caractéristiques…"></textarea>
      </label>
      <label>
        Image de la marque
        <input type="file" name="image_file" accept="image/*">
        <small>La largeur sera automatiquement ajustée à 800&nbsp;px.</small>
      </label>
    </div>
    <button type="submit">Créer la marque</button>
  </form>
</section>
{{end}}
