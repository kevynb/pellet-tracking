{{define "brands"}}
{{template "layout" .}}
{{end}}

{{define "content"}}
<section class="surface stack">
  <div class="section-header">
    <div>
      <h2>Marques</h2>
      <p class="section-subtitle">Centralisez vos fournisseurs pour les réutiliser en un clic.</p>
    </div>
    <p class="metric-pill">{{len .Data.Brands}} marques enregistrées</p>
  </div>
  <div class="brand-gallery">
    {{if .Data.Brands}}
    {{range .Data.Brands}}
    {{$brand := .}}
    <article class="brand-card">
      <div>
        <h3>{{.Name}}</h3>
        <p class="meta">Créée le {{formatDate .CreatedAt}}</p>
      </div>
      {{with brandImageURL $brand.ImageBase64}}
      <img src="{{.}}" alt="Illustration de la marque {{$brand.Name}}">
      {{end}}
      {{if .Description}}
      <p>{{.Description}}</p>
      {{end}}
    </article>
    {{end}}
    {{else}}
    <p>Aucune marque définie pour le moment.</p>
    {{end}}
  </div>
</section>

<section class="surface stack">
  <div class="section-header">
    <div>
      <h3>Ajouter une marque</h3>
      <p class="section-subtitle">Enrichissez vos fiches avec une description et une image depuis votre ordinateur.</p>
    </div>
  </div>
  <form method="post" class="stack" data-controller="brand-form">
    <div class="form-grid">
      <label>
        Nom
        <input type="text" name="name" placeholder="Ex. Woodstock" required>
      </label>
      <label>
        Description
        <textarea name="description" placeholder="Notes, caractéristiques…"></textarea>
      </label>
      <label>
        Image
        <input type="file" accept="image/*" data-role="brand-image-input">
        <input type="hidden" name="image_base64" data-role="brand-image-base64">
        <small data-role="brand-image-feedback">Sélectionnez une image : elle sera automatiquement convertie.</small>
      </label>
    </div>
    <button type="submit">Créer la marque</button>
  </form>
</section>
{{end}}
